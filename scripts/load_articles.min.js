var newsData={};var searchData=[];function loadHomeArticles(){$.ajax({type:"GET",url:"sample_data/popular_articles.json",dataType:"json",success:function(d){newsData.popular=d;for(var c=0;c<4;c++){try{$("#popularHeader").find(".row:first").prepend('<div class="col col-sm-6 col-lg-3"><h6>'+d.response["mostViewed"][c]["webTitle"]+'</h6><img src="'+d.response.mostViewed[c]["blocks"]["body"][4]["elements"][1]["assets"][0]["file"]+'" class="img-fluid"><button type="button" class="view-more-btn btn" data-target="'+c+'" data-category="popular">View More</button></div>')}catch(b){try{$("#popularHeader").find(".row:first").prepend('<div class="col col-sm-6 col-lg-3"><h6>'+d.response["mostViewed"][c]["webTitle"]+'</h6><img src="'+d.response.mostViewed[c]["blocks"]["main"]["elements"][0]["assets"][0]["file"]+'" class="img-fluid"><button type="button" class="view-more-btn btn" data-target="'+c+'" data-category="popular">View More</button></div>')}catch(b){$("#popularHeader").find(".row:first").prepend('<div class="col col-sm-6 col-lg-3"><h6>'+d.response["mostViewed"][c]["webTitle"]+'</h6><img src="images/image_unavailable.svg" class="img-fluid"><button type="button" class="view-more-btn btn" data-target="'+c+'" data-category="popular">View More</button></div>')}}}for(var a=5;a<9;a++){try{$("header").find(".extra .row").append('<div class="col col-sm-6 col-lg-3"  data-target="'+a+'"><h6>'+d.response["mostViewed"][a]["webTitle"]+'</h6><img src="'+d.response.mostViewed[a]["blocks"]["main"]["elements"][0]["assets"][0]["file"]+'" class="img-fluid"><button type="button" class="view-more-btn btn" data-target="'+a+'" data-category="popular">View More</button></div>')}catch(b){$("header").find(".extra .row").append('<div class="col col-sm-6 col-lg-3"  data-target="'+a+'"><h6>'+d.response["mostViewed"][a]["webTitle"]+'</h6><img src="" class="img-fluid"><button type="button" class="view-more-btn btn" data-target="'+a+'" data-category="popular">View More</button></div>')}}loadSearchData("popular",d)},error:function(){$("#popularHeader").find(".row:first").prepend('<div class="alert alert-danger" role="alert">Unfortunately, there has been a problem loadingthe news articles at this time, please try again by refreshing</div>')}})}function loadJsonData(a,b){$.ajax({type:"GET",url:a,dataType:"json",success:function(e){newsData[b]=e;var f=$("#"+b+"NewsSection");$(f).find(".container > .row").html("");for(var d=0;d<8;d++){try{f.find(".container > .row").append('<div class="col col-sm-6 col-lg-3"><h6>'+e.response["results"][d]["webTitle"]+'</h6><img src="'+e.response.results[d]["blocks"]["main"]["elements"][0]["assets"][0]["file"]+'" class="img-fluid"><button type="button" class="view-more-btn btn" data-target="'+d+'" data-category="'+b+'">View More</button></div>')}catch(c){try{f.find(".container > .row").prepend('<div class="col col-sm-6 col-lg-3"><h6>'+e.response["results"][d]["webTitle"]+'</h6><img src="'+e.response.results[d]["blocks"]["main"]["elements"][0]["assets"][0]["file"]+'" class="img-fluid"><button type="button" class="view-more-btn btn" data-target="'+d+'" data-category="popular">View More</button></div>')}catch(c){f.find(".container > .row").append('<div class="col col-sm-6 col-lg-3"><h6>'+e.response["results"][d]["webTitle"]+'</h6><img src="images/image_unavailable.svg" class="img-fluid"><button type="button" class="view-more-btn btn" data-target="'+d+'" data-category="'+b+'">View More</button></div>')}}}loadSearchData(b,e)},error:function(){console.log("Error")}})}function loadSearchData(d,e){var b="";if(d==="popular"){b="mostViewed"}else{b="results"}for(var c=0;c<e.response[b].length;c++){searchData.push({label:e.response[b][c]["webTitle"],category:d,index:c})}}$(document).ready(function(){loadHomeArticles();loadJsonData("sample_data/sport_articles.json","sport");loadJsonData("sample_data/tech_articles.json","tech");loadJsonData("sample_data/politics_articles.json","politics");loadJsonData("sample_data/science_articles.json","science");$.get("sample_data/recent_articles.json",function(e,c){var d="";for(var b=0;b<6;b++){d+=e.response["results"][b]["webTitle"]+" - RECENT NEWS - "}$("#recentNewsMarquee").text(d)});$(function(){$("#input").autocomplete({minLength:3,source:searchData,focus:function(a,b){return false},select:function(c,d){$("#input").val(d.item.label);var a=d.item.index;var b=d.item.category;show_modal(b,a,newsData);return false}}).data("ui-autocomplete")._renderItem=function(a,b){var c=b.label;$("#clearInputButton").popover("hide");return $("<li>").append("<a>"+c+"</a>").appendTo(a)}});$(document).on("click","button.view-more-btn",function(){var a=$(this).data("target");var b=$(this).attr("data-category");show_modal(b,a,newsData)})});